/* === UNS Accent Palette for Minimal Mistakes === */

/* -- Light Mode (Default) -- */
:root {
  --uns-novel:     #737373;  /* neutral gray */
  --uns-valid:     #3b82f6;  /* blue-500 */
  --uns-invalid:   #ef4444;  /* red-500 */
  --uns-masked:    #a855f7;  /* purple-500 */
  --uns-fused:     #10b981;  /* green-500 */
  --uns-uncertain: #f59e0b;  /* amber-500 */
  --uns-stable:    #14b8a6;  /* teal-500 */
  --uns-unstable:  #e11d48;  /* rose-600 */
  --uns-highlight-bg: #f9fafb;
  --uns-inline-bg: #f3f4f6;
  --uns-inline-border: #e5e7eb;
}

@media (prefers-color-scheme: light) {
  .highlight,
  pre.highlight,
  pre code {
    background-color: #f9fafb !important;
    color: #1e293b !important;
    border: 1px solid #e5e7eb;
  }

  .highlight .k     { color: #1d4ed8; }
  .highlight .s     { color: #dc2626; }
  .highlight .mi,
  .highlight .mf    { color: #059669; }
  .highlight .c     { color: #6b7280; font-style: italic; }
}

/* -- Dark Mode Override -- */
@media (prefers-color-scheme: dark) {
  :root {
    --uns-novel:     #cbd5e1;  /* light gray */
    --uns-valid:     #60a5fa;  /* blue-400 */
    --uns-invalid:   #f87171;  /* red-400 */
    --uns-masked:    #c084fc;  /* purple-400 */
    --uns-fused:     #34d399;  /* green-400 */
    --uns-uncertain: #fbbf24;  /* amber-400 */
    --uns-stable:    #2dd4bf;  /* teal-400 */
    --uns-unstable:  #fb7185;  /* rose-400 */
    --uns-highlight-bg: #1f2937;
    --uns-inline-bg: #374151;
    --uns-inline-border: #4b5563;
  }
}

/* === UNS Thematic Styling Rules === */

/* Inline math emphasis */
mjx-container[jax="CHTML"] {
  font-size: 1.02em;
  line-height: 1.4;
}

/* Inline math highlight */
mjx-container[jax="CHTML"][display="inline"] {
  background-color: var(--uns-inline-bg);
  border-radius: 4px;
  padding: 0.05em 0.2em;
  border: 1px solid var(--uns-inline-border);
}

/* Block math layout */
mjx-container[jax="CHTML"][display="true"] {
  margin: 1em 0;
  text-align: center;
}

/* Code & math color harmony */
code, pre code {
  background-color: var(--uns-inline-bg);
  border-radius: 4px;
  border: 1px solid var(--uns-inline-border);
  color: var(--uns-stable);
}

/* Highlighted callouts for UNS terms */
.uns-term {
  display: inline-block;
  font-weight: 600;
  padding: 0.1em 0.4em;
  border-radius: 0.3em;
  color: #fff;
  background-color: var(--uns-fused);
}

.uns-term.invalid   { background-color: var(--uns-invalid); }
.uns-term.masked    { background-color: var(--uns-masked); }
.uns-term.uncertain { background-color: var(--uns-uncertain); }
.uns-term.stable    { background-color: var(--uns-stable); }
.uns-term.unstable  { background-color: var(--uns-unstable); }

/* Blockquote UNS style */
blockquote {
  border-left: 4px solid var(--uns-fused);
  background-color: var(--uns-highlight-bg);
  color: inherit;
}

/* Links hover effect matching UNS green */
a:hover {
  color: var(--uns-fused);
}

/* === UNS Callout Boxes (extends Minimal Mistakes notices) === */

/* Base layout matching Minimal Mistakes' notice system */
.uns-callout {
  margin: 1.5em 0;
  padding: 1em 1.2em;
  border-left: 6px solid var(--uns-fused);
  border-radius: 0.5em;
  background-color: var(--uns-highlight-bg);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.uns-callout h4 {
  margin-top: 0;
  font-weight: 700;
}

/* === Variant Styles === */

/* Insight — conceptual breakthroughs or core ideas */
.uns-callout--insight {
  border-left-color: var(--uns-fused);
}
.uns-callout--insight h4 {
  color: var(--uns-fused);
}

/* Warning — modeling caveats, edge cases */
.uns-callout--warning {
  border-left-color: var(--uns-uncertain);
  background-color: rgba(245, 158, 11, 0.06);
}
.uns-callout--warning h4 {
  color: var(--uns-uncertain);
}

/* Error or invalid state markers */
.uns-callout--invalid {
  border-left-color: var(--uns-invalid);
  background-color: rgba(239, 68, 68, 0.05);
}
.uns-callout--invalid h4 {
  color: var(--uns-invalid);
}

/* Stable-state observations */
.uns-callout--stable {
  border-left-color: var(--uns-stable);
  background-color: rgba(20, 184, 166, 0.05);
}
.uns-callout--stable h4 {
  color: var(--uns-stable);
}

/* Novel-state commentary */
.uns-callout--novel {
  border-left-color: var(--uns-novel);
  background-color: rgba(115, 115, 115, 0.05);
}
.uns-callout--novel h4 {
  color: var(--uns-novel);
}

/* Dark-mode adjustment */
@media (prefers-color-scheme: dark) {
  .uns-callout {
    background-color: var(--uns-inline-bg);
    box-shadow: 0 0 0.5em rgba(0, 0, 0, 0.3);
  }
}

/* === UNS Code Block and Syntax Highlighting (Unified) === */

/* Base code block styling — shared defaults */
.highlight,
pre.highlight,
pre code {
  font-family: "Fira Code", "JetBrains Mono", Consolas, monospace;
  font-size: 0.95em;
  line-height: 1.55;
  border-radius: 8px;
  padding: 1em 1.2em;
  overflow-x: auto;
  border: 1px solid transparent;
  box-shadow: none;
}

/* Inline code */
code.highlighter-rouge {
  font-family: "Fira Code", "JetBrains Mono", Consolas, monospace;
  line-height: 1.3;
  padding: 0.15em 0.35em;
  border-radius: 4px;
  font-size: 0.95em;
  border: 1px solid transparent;
}

/* --- Light Mode --- */
@media (prefers-color-scheme: light) {
  .highlight,
  pre.highlight,
  pre code {
    background-color: #f9fafb !important; /* Soft white */
    color: #1e293b !important;            /* Slate text */
    border-color: #e5e7eb;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  }

  code.highlighter-rouge {
    background-color: #f3f4f6;
    border-color: #e5e7eb;
    color: #1e293b;
  }

  /* Light-mode syntax palette (VSCode light) */
  .highlight .k     { color: #1d4ed8; }   /* keyword - blue */
  .highlight .nb    { color: #047857; }   /* built-ins */
  .highlight .s     { color: #dc2626; }   /* strings - red */
  .highlight .mi,
  .highlight .mf    { color: #059669; }   /* numbers - green */
  .highlight .c     { color: #6b7280; font-style: italic; } /* comments */
  .highlight .o     { color: #111827; }   /* operators */
  .highlight .nf    { color: #9333ea; }   /* functions */
  .highlight .p,
  .highlight .n     { color: #1e293b; }   /* names, punctuation */
}

/* --- Dark Mode --- */
@media (prefers-color-scheme: dark) {
  .highlight,
  pre.highlight,
  pre code {
    background-color: #1e1e1e !important; /* Neutral deep gray */
    color: #f0f0f0 !important;
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
  }

  code.highlighter-rouge {
    background-color: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.12);
    color: #f5f5f5;
  }

  /* Dark-mode syntax palette (VSCode Dark+) */
  .highlight .k     { color: #569cd6; }
  .highlight .nb    { color: #4ec9b0; }
  .highlight .s     { color: #ce9178; }
  .highlight .mi,
  .highlight .mf    { color: #b5cea8; }
  .highlight .o     { color: #d4d4d4; }
  .highlight .c     { color: #6a9955; font-style: italic; }
  .highlight .p     { color: #d4d4d4; }
  .highlight .n     { color: #9cdcfe; }
  .highlight .nf    { color: #dcdcaa; }
}

/* --- Scrollbar Style (Dark only, optional) --- */
@media (prefers-color-scheme: dark) {
  .highlight::-webkit-scrollbar {
    height: 0.5em;
  }
  .highlight::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 3px;
  }
  .highlight::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }
}
